<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Invitación - ClashGPT</title>
<style>
  body { margin:0; font-family:Arial,Helvetica,sans-serif; background:#06060a; color:#fff; display:flex; align-items:center; justify-content:center; height:100vh; }
  .card{ background:linear-gradient(180deg,#0f0b14 0,#12081a 100%); padding:22px; border-radius:12px; width:92%; max-width:520px; box-shadow:0 8px 40px rgba(176,98,255,0.08); text-align:center;}
  h1{margin:0 0 8px 0; font-size:20px; color:#d4c9ff}
  p{opacity:.9}
  .btn{display:inline-block;margin-top:14px;padding:10px 16px;border-radius:8px;background:#b062ff;color:#fff;text-decoration:none;cursor:pointer;border:none}
  .small{font-size:13px;opacity:.8;margin-top:8px}
  input{width:100%;padding:10px;border-radius:8px;border:1px solid #222;background:#0a0a0d;color:#fff;margin-top:8px}
  .muted{opacity:.6;font-size:13px;margin-top:6px}
</style>
</head>
<body>
  <div class="card">
    <h1 id="title">Invitación</h1>
    <p id="desc">Estás siendo invitado a registrarte.</p>

    <div id="info" style="margin-top:12px">
      <div class="muted">Invitado por: <strong id="inviter">—</strong></div>
      <div class="muted">Plataforma: <strong id="platform">—</strong></div>
    </div>

    <div id="actions">
      <button class="btn" id="goRegister">Ir a registro</button>
      <div class="small">Si ya tienes cuenta, puedes ingresar directamente en la app.</div>
    </div>

    <div style="margin-top:12px" class="muted">
      Si el botón no funciona, usa este enlace de registro: <br>
      <code id="rawLink" style="word-break:break-all;"></code>
    </div>
  </div>

<script>
/*
 invite.html
 - Lee parámetros ?ref=REFID & platform=NAME
 - Muestra información y redirige a registro.html?ref=...&platform=...
 - Preparado para compartir enlaces con el nombre de la plataforma en la querystring
*/

const params = new URLSearchParams(location.search);
const ref = params.get('ref') || params.get('r') || '';
const platform = params.get('platform') || params.get('p') || 'ClashGPT';

// mostrar en UI
document.getElementById('inviter').innerText = ref || 'Anónimo';
document.getElementById('platform').innerText = platform;
document.getElementById('title').innerText = `${platform} — Invitación`;
document.getElementById('desc').innerText = ref
  ? `Has recibido un link de invitación (referido: ${ref}).`
  : `Has abierto un link de invitación.`;

// preparar enlace final hacia registro.html (mantener params)
const regUrl = `registro.html?ref=${encodeURIComponent(ref)}&platform=${encodeURIComponent(platform)}`;
document.getElementById('rawLink').innerText = regUrl;

document.getElementById('goRegister').addEventListener('click', ()=> {
  // redirigir (funciona en Acode)
  location.href = regUrl;
});

// si quieres hacer autoredirect (opcional), descomenta la línea siguiente:
// setTimeout(()=> location.href = regUrl, 1200);
</script>
</body>
</html>